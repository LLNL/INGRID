# =================================================================================================
# Ingrid parameter file overview (YAML format)
#   keys : 'grid_params', 'integrator_params', 'target_plates', 'DEBUG'
# =================================================================================================

# =================================================================================================
# grid_params - (dict)
# 
#     Topologically significant parameters for INGRID to
#     utilize during runtime.
#
#     Keys: (relevent to beta testing SNL_v_1.0)
# 
#       config - (str) 
#           Topology associated with current parameters
#           ('LSN' : lower-single-null, 'USN' : upper-single-null)
# 
#       num_xpt - (int) 
#           Number of x-points
# 
#       nlevs - (int) 
#           Number of contour levels to plot from EFIT data
# 
#       psi_max - (double) (SNL configuration only)
#           Maximum psi-value found in scrape off layer
# 
#       psi_max_r - (double) (SNL configuration only, optional)
#           R coordinate of 'click' corresponding to psi_max selection
# 
#       psi_max_z - (double) (SNL configuration only, optional)
#           Z coordinate of 'click' corresponding to psi_max selection
# 
#       psi_min_core - (double)
#           Minimal psi-value found in core region
# 
#       psi_min_core_r - (double) (optional)
#           R coordinate of 'click' corresponding to psi_min_core selection
# 
#       psi_min_core_z - (double)
#           Z coordinate of 'click' corresponding to psi_min_core selection
# 
#       psi_min_pf - (double)
#           Minimal psi-value found in private-flux region of primary x-point
# 
#       psi_min_pf_r - (double)
#           R coordinate of 'click' corresponding to psi_min_pf selection
# 
#       psi_min_pf_z - (double)
#           Z coordinate of 'click' corresponding to psi_min_pf selection
#
#       rmagx - (double)
#           R coordinate of magnetic axis
#
#       zmagx - (double)
#           Z coordinate of magnetic axis
#
#       rxpt - (double)
#           R coordinate of primary x-point
#
#       zxpt - (double)
#           Z coordinate of primary x-point
#
#       grid_generation - (dict)
#           Dictionary of parameters dealing with grid generation settings.
#           
#           Note: For beta testing, we advise the use of the parameters
#           'n*_sol', 'n*_pf', 'n*_core', and 'n*_global'. 
#
#           keys: (relevent to beta testing SNL_v_1.0)
#
#               np_sol - (int)
#                   Number of grid lines in poloidal direction
#                   in scrape off layer region
#
#               nr_sol - (int)
#                   Number of grid lines in radial direction
#                   in scrape off layer
#
#               np_pf- (int) ()
#                   Number of grid lines in poloidal direction
#                   in primary x-point private-flux region
#
#               nr_pf - (int)
#                   Number of grid lines in radial direction
#                   in primary x-point private-flux region
#
#               np_core - (int)
#                   Number of grid lines in poloidal direction
#                   in core region
#
#               nr_core - (int)
#                   Number of grid lines in radial direction
#                   in core region
#
#               np_global - (int)
#                   Default setting for number of grid lines 
#                   in poloidal direction when a required np_*
#                   value is unavailable.
#
#               nr_global - (int)
#                   Default setting for number of grid lines 
#                   in radial direction when a required nr_*
#                   value is unavailable.
#
#               radial_f_sol - (str)
#                   Transformation applied to radial grid cells
#                   in scrape off layer
#
#               radial_f_core - (str)
#                   Transformation applied to radial grid cells
#                   in core region
#
#               radial_f_pf - (str)
#                   Transformation applied to radial grid cells
#                   in primary x-point private-flux region
#
#               poloidal_f - (str)
#                   Transformation applied to entire grid in poloidal
#                   direction.
#                   Note: Will be overwritten by target_plate poloidal_f
#                   entry if provided.
#
#                Note on specifying transformations:
#                 - The sequence of characters before ',' must
#                   denote the variable name VAR to operate upon.
#
#                 - Place a user-defined mathematical expression
#                   after the ',' delimiter utilizing the variable
#                   VAR defined before-hand.
#
#                 - The package SymPy is used to convert user-input 
#                   to a mathematical expression. This requires the 
#                   input to be a valid Python expression. 
#
#                 - For detailed information on available functions,
#                   see Sympy docs pertaining to "Functions" module.
#
#
#       patch_generation - (dict)
#           Parameters dealing with patch map generation settings.
#
#           keys: (relevent to beta testing SNL_v_1.0)
#
#               rmagx_shift - (double)
#                   Transform magnetic axis r coordinate by 
#                   rmagx_shift
#
#               zmagx_shift - (double)
#                   Transform magnetic axis z coordinate by 
#                   zmagx_shift
#
#               inner_tilt - (double)
#                   Apply a rotation of inner_tilt radians to 
#                   the half of midplane west of primary
#                   x-point
#
#               outer_tilt - (double)
#                   Apply a rotation of outer_tilt radians to 
#                   the half of midplane east of primary
#                   x-point
#
#               use_NW - (bool)
#                   Override orthogonal line trace from primary x-point in NW direction
#                   and use a constant slope (default to bisector between N and W)
#
#               NW_adjust - (double)
#                   Specifies how many radians to rotate W direction clockwise about primary
#                   x-point for NW line trace. Only applied if use_NW flag is set.
#
#               use_NE - (bool)
#                   Override orthogonal line trace from primary x-point in NE direction
#                   and use a constant slope (default to bisector between N and E)
#
#               NE_adjust - (double)
#                   Specifies how many radians to rotate E direction clockwise about primary
#                   x-point for NE line trace. Only applied if use_NE flag is set.
#
#
#
# =================================================================================================

# =================================================================================================
# integrator_params - (dict)
# 
#     Integrator and line_tracing class settings.
#
#     Keys:
# 
#       dt - (double)
#           Integration time-step for line_tracing class 
#
#       eps - (double)
#           Radius of neighborhood around x-points when setting NSEW directions
#
#       first_step - (double)
#           Initial step-size for LSODA integrator
#
#       step_ration - (double)
#           A ration of RZ-domain dimensions to determine max_step parameter
#           for LSODA integrator
#
#       tol - (double)
#           Tolerance value for defining convergence criteria for line_tracing class
# =================================================================================================

# =================================================================================================
# target_plates - (dict)
# 
#     Target plate information. 
#
#     Naming convention:
#           Let North be the path towards the magnetic-axis from a given x-point.
#       
#           E - East of an x-point
#           W - West of an x-point
#           1 - Primary x-point
#           2 - Secondary x-point
#
#     Keys:
# 
#       plate_* - (dict)
#           Dictionary corresponding to a given plate (E1, W1, E2, W2)
#
#           Keys:
#               
#               file - (str)
#                   Path to file containing target plate coordinates
#
#               name - (str)
#                   Identifier associated with target plate
#
#               np_local - (int)
#                   Number of poloidal cells to generate in patches adjacent
#                   to target plate
#
#               nr_local - (int)
#                   Number of radial cells to generate in patches adjacent
#                   to target plate
#
#               z_shift - (double)
#                   Apply a transformation to z component of target plate
#                   coordinates
#
#               poloidal_f - (str)
#                   Transformation to be applied to poloidal cells in patch 
#                   adjacent to target plate
#
#                Note on specifying transformations:
#                 - The sequence of characters before ',' must
#                   denote the variable name VAR to operate upon.
#
#                 - Place a user-defined mathematical expression
#                   after the ',' delimiter utilizing the variable
#                   VAR defined before-hand.
#
#                 - The package SymPy is used to convert user-input 
#                   to a mathematical expression. This requires the 
#                   input to be a valid Python expression. 
#
#                 - For detailed information on available functions,
#                   see Sympy docs pertaining to "Functions" module.
#
# =================================================================================================

# =================================================================================================
# DEBUG - (dict)
# 
#     Controls for DEBUG mode in Ingrid
#
#     Keys:
# 
#        visual - (dict) 
#            Dictionary of bool/logical-int values to activate live-plotting 
#            during INGRID operations.
#         
#            Keys:
# 
#                find_NSEW - (bool/logical-int) 
#                    Show line_tracing during search for North/South 
#                    from primary x-point
#
#                patch_map - (bool/logical-int) 
#                    Show line_tracing during generation of patch-map
#
#                subgrid - (bool/logical-int) 
#                    Show line_tracing during generation of subgrids 
#                    within each patch
#
#                gridue - (bool/logical-int) 
#                    Plot gridue data with guard cells in order of increasing 
#                    poloidal and radial indices
#
#        verbose - (dict) 
#            Dictionary of bool/logical-int values to activate verbose 
#            output during INGRID operations.
#
#            Keys:
#
#               target_plates - (bool/logical-int) 
#                   Print all target plate coordinates to terminal
#
#               patch_generation - (bool/logical-int) 
#                   Print all patch names and intersection/convergence events 
#                   that occur during patch generation
#
#               grid_generation - (bool/logical-int)
#                   Print cell information of a patch, and the populating of 
#                   arrays containing gridue data during meshgrid generation.  
#
# =================================================================================================

DEBUG:
    verbose:
        grid_generation: 0
        patch_generation: 1
        target_plates: 0
    visual:
        find_NSEW: 0
        gridue: 0
        patch_map: 0
        subgrid: 1
eqdsk: ../data/SNL/SAS1/g175816.03000
grid_params:
    config: USN
    grid_generation:
        np_core: 5
        np_global: 5
        np_pf: 5
        np_primary_pf: 2
        np_primary_sol: 2
        np_secondary_pf: 2
        np_secondary_sol: 2
        np_sol: 14
        nr_core: 4
        nr_global: 4
        nr_pf: 10
        nr_primary_pf: 2
        nr_primary_sol: 2
        nr_secondary_pf: 2
        nr_secondary_sol: 2
        nr_sol: 14
        radial_f_core: x, x
        radial_f_pf: x, x
        radial_f_primary_pf: x, x
        radial_f_primary_sol: x, x
        radial_f_secondary_pf: x, x
        radial_f_secondary_sol: x, x
        radial_f_sol: x, x
        poloidal_f: x, x
    nlevs: 30
    num_xpt: 1
    patch_generation:
        NE_adjust: 0.0
        NW_adjust: 0.0
        inner_tilt: 0.0
        outer_tilt: 0.0
        rmagx_shift: 0.0
        rxpt: 0.0
        secondary_NE_adjust: 0.0
        secondary_NW_adjust: 0.0
        use_NE: false
        use_NW: false
        use_SE: false
        use_SW: false
        use_secondary_NE: false
        use_secondary_NW: false
        zmagx_shift: 0.0
        zxpt: 0.0
    psi_max: 1.040749105907
    psi_max_inner: 0.0
    psi_max_outer: 0.0
    psi_max_r: 1.528056676632
    psi_max_r_inner: 0.0
    psi_max_r_outer: 0.0
    psi_max_z: 1.106009796975
    psi_max_z_inner: 0.0
    psi_max_z_outer: 0.0
    psi_min_core: 0.904041825299
    psi_min_core_r: 1.212582672018
    psi_min_core_z: 0.264745784672
    psi_min_pf: 0.978234882796
    psi_min_pf_r: 1.035917229434
    psi_min_pf_z: 1.131247717344
    psi_pf2: 0.0
    psi_pf2_r: 0.0
    psi_pf2_z: 0.0
    rmagx: 1.74358642
    rxpt: 1.370674632239
    rxpt2: 0.0
    zmagx: -0.0898046866
    zxpt: 0.998624803572
    zxpt2: 0.0
integrator_params:
    dt: 0.01
    eps: 5.0e-05
    first_step: 5.0e-05
    max_step: 0.064
    step_ratio: 0.02
    tol: 0.005
target_plates:
    plate_E1:
        file: '../data/SNL/SAS1/itp4.txt'
        name: plate_E1
        np_local: 12
        poloidal_f: x, x
        zshift: 0
    plate_E2:
        file:  
        name: plate_E2
        np_local: 3
        poloidal_f: x, x
        zshift: 1.6
    plate_W1:
        file: '../data/SNL/SAS1/SAS_odt.txt'
        name: plate_W1
        np_local: 12
        poloidal_f: x, x
        zshift: 0
    plate_W2:
        file:  
        name: plate_W2
        np_local: 3
        poloidal_f: x, x
        zshift: 1.6
